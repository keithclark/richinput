/*! @keithclark/rich-input v1.0.0 - Keith Clark - MIT license */
const t=new CSSStyleSheet;t.replaceSync(":host(:not([hidden])){display:inline-flex;width:20ch;border:1px solid #ccc;color:fieldtext;caret-color:fieldtext;background-color:field;line-height:1}@supports (font: -apple-system-body){:host(:not([hidden])){caret-color:canvastext;background-color:canvas;color:canvastext}}:host(:disabled){color:graytext;pointer-events:none}:host::selection{background:highlight}:host(:focus){outline:auto Highlight;outline:auto -webkit-focus-ring-color}:host(:disabled) output{display:none}:host(:enabled) input:not(:placeholder-shown){color:transparent}input::selection{background:var(--selection, highlight)}div{overflow-x:auto;overflow-y:hidden;scrollbar-width:none;overscroll-behavior-inline:none;width:100%;height:100%;display:flex}div::-webkit-scrollbar{display:none}span{display:grid;align-items:center}input,output{all:unset;grid-row:1;grid-column:1;white-space:pre;background:transparent;color:inherit;width:100%;line-height:inherit;font-kerning:none}input.noselection+output{order:-1}output{pointer-events:none}input{text-shadow:none}input::-webkit-calendar-picker-indicator{display:none}input:-internal-autofill-previewed{background-clip:text}input:-internal-autofill-previewed + output{display:none}input:-internal-autofill-selected{-webkit-text-fill-color:transparent;background-clip:text}");var e=(()=>{const t=document.createElement("template");return t.innerHTML='<div tabindex="-1"><span><input><output aria-hidden="true"></output></span></div>',t.content})();const i=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;"),n=["text","email","url","tel"];((t,e,i=[])=>{const n=[];for(const t of getComputedStyle(document.documentElement))i.includes(t)||n.push(`${t}: unset !important`);t.insertRule(`${e} {${n.join(";")}}`)})(t,"b",["color","background-color","text-decoration-color","text-decoration-line","text-decoration-style","text-decoration-thickness","text-shadow"]);class s extends HTMLElement{#t;#e;#i=this.attachInternals();#n=null;constructor(){super();const i=this.attachShadow({mode:"open",delegatesFocus:!0});i.appendChild(e.cloneNode(!0)),i.adoptedStyleSheets=[t],this.#t=i.querySelector("input"),this.#e=i.querySelector("output"),this.#t.oninput=()=>this.#s(),this.#t.onselectionchange=()=>{const{selectionStart:t,selectionEnd:e,classList:i}=this.#t;i.toggle("noselection",null!==t&&t===e)},this.addEventListener("focus",(()=>{this.#r();const t=this.list;if(t){const e=t.cloneNode(!0);this.shadowRoot.appendChild(e),this.addEventListener("blur",(()=>{e.remove()}),{once:!0})}this.#t.focus()}))}connectedCallback(){this.value=this.getAttribute("value"),this.readOnly=this.hasAttribute("readonly"),this.disabled=this.hasAttribute("disabled"),this.required=this.hasAttribute("required"),this.hasAttribute("pattern")&&(this.pattern=this.getAttribute("pattern")),this.#r()}attributeChangedCallback(t,e,i){if("stylepattern"===t)try{this.#n=new RegExp(`^(?:${i})$`,"gd")}catch(t){this.#n=null}else"type"===t?n.includes(i)?this.#t.type=i:this.#t.type="text":null===i?this.#t.removeAttribute(t):this.#t.setAttribute(t,i);this.#s()}#o(){const{validity:t,validationMessage:e}=this.#t;this.#i.setValidity(t,e||"Error",this.#t)}#r(){const{backgroundColor:t}=getComputedStyle(this,"::selection");this.#t.style.setProperty("--selection",t)}#s(){const{value:t}=this.#t;this.#i.setFormValue(t),this.#o();const e=this.#n?.exec(t);if(!e)return void(this.#e.textContent=t);const{indices:n}=e,s=[];let r=0;for(let e=1;e<n.length;e++){if(!n[e])continue;const[o,l]=n[e];o>r&&s.push(i(t.slice(r,o))),s.push(`<b part="group-${e}">${i(t.slice(o,l))}</b>`),r=l}r<t.length&&s.push(i(t.slice(r))),this.#e.innerHTML=s.join(""),this.#n.lastIndex=0}get value(){return this.#t.value}set value(t){this.#t.value=t,this.#s()}get list(){return this.ownerDocument.getElementById(this.getAttribute("list"))}get type(){const t=this.getAttribute("type");return n.includes(t)?t:"text"}set type(t){this.setAttribute("type",t)}setSelectionRange(...t){this.#t.focus(),this.#t.setSelectionRange(...t)}setRangeText(...t){this.#t.focus(),this.#t.setRangeText(...t),this.#s()}select(){this.#t.select()}focus(t){this.#t.focus(t)}get selectionStart(){return this.#t.selectionStart}set selectionStart(t){this.#t.selectionStart=t}get selectionEnd(){return this.#t.selectionEnd}set selectionEnd(t){this.#t.selectionEnd=t}get selectionDirection(){return this.#t.selectionDirection}set selectionDirection(t){this.#t.selectionDirection=t}get form(){return this.#i.form}checkValidity(){return this.#i.checkValidity()}reportValidity(){return this.#i.reportValidity()}setCustomValidity(t){t?this.#i.setValidity({customError:!0},t,this.#t):this.#o()}get validationMessage(){return this.#i.validationMessage}get validity(){return this.#i.validity}get willValidate(){return this.#i.willValidate}get stylePattern(){return this.getAttribute("stylepattern")}set stylePattern(t){this.setAttribute("stylepattern",t)}get placeholder(){return this.getAttribute("placeholder")}set placeholder(t){this.setAttribute("placeholder",t)}get autocomplete(){return this.getAttribute("autocomplete")}set autocomplete(t){this.setAttribute("autocomplete",t)}get required(){return this.hasAttribute("required")}set required(t){this.toggleAttribute("required",!!t)}get disabled(){return this.hasAttribute("disabled")}set disabled(t){this.toggleAttribute("disabled",!!t)}get readOnly(){this.hasAttribute("readonly")}set readOnly(t){this.toggleAttribute("readonly",!!t)}get pattern(){return this.getAttribute("pattern")}set pattern(t){this.setAttribute("pattern",t)}static formAssociated=!0;static get observedAttributes(){return["stylepattern","readonly","value","disabled","required","pattern","placeholder","type","size","list","dirName","autocomplete"]}}export{s as default};
//# sourceMappingURL=richinput.js.map
